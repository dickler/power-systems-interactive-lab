<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clarke Transform & FFT Visualization</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="container">
        <div class="sidebar">
            <div class="sidebar-header">
                <h2>Controls</h2>
            </div>

            <div class="control-group">
                <h3>Playback</h3>
                <div class="slider-container">
                    <label id="time-display">Time: 0.00 s</label>
                    <input type="range" id="time-slider" min="0" max="199" value="0">
                </div>
                <div class="button-row">
                    <button id="play-btn">Play</button>
                    <button id="reset-btn">Reset</button>
                </div>
                <div class="checkbox-row">
                    <input type="checkbox" id="loop-check" checked>
                    <label for="loop-check">Loop Animation</label>
                </div>
                <div class="input-group">
                    <label for="speed-select">Speed:</label>
                    <select id="speed-select">
                        <option value="0.25">0.25x</option>
                        <option value="0.5">0.5x</option>
                        <option value="1" selected>1x</option>
                        <option value="2">2x</option>
                        <option value="5">5x</option>
                        <option value="10">10x</option>
                    </select>
                </div>
                <div class="input-group">
                    <label for="preset-select">Preset:</label>
                    <select id="preset-select">
                        <option value="Custom">Custom</option>
                        <option value="Wind Blades">Wind Blades</option>
                        <option value="Oak Tree">Oak Tree</option>
                        <option value="Gear">Gear</option>
                        <option value="Hypotrochoid">Hypotrochoid</option>
                        <option value="Pure Sine">Pure Sine</option>
                    </select>
                </div>
            </div>

            <div class="control-group">
                <div class="input-group">
                    <label>Harmonics:</label>
                    <div class="harmonic-inputs">
                        <div class="h-input">
                            <label>H1 <span class="seq-pos">(+)</span>:</label>
                            <input type="number" id="amp-h1" value="1.0" step="0.1" min="0" max="10">
                            <input type="color" id="color-h1" value="#55FF55">
                        </div>
                        <div class="h-input">
                            <label>H2 <span class="seq-neg">(-)</span>:</label>
                            <input type="number" id="amp-h2" value="0.0" step="0.1" min="0" max="10">
                            <input type="color" id="color-h2" value="#FF55FF">
                        </div>
                        <div class="h-input">
                            <label>H3 <span class="seq-zero">(0)</span>:</label>
                            <input type="number" id="amp-h3" value="0.0" step="0.1" min="0" max="10">
                            <input type="color" id="color-h3" value="#FFFF55">
                        </div>
                        <div class="h-input">
                            <label>H4 <span class="seq-pos">(+)</span>:</label>
                            <input type="number" id="amp-h4" value="0.0" step="0.1" min="0" max="10">
                            <input type="color" id="color-h4" value="#FF5555">
                        </div>
                        <div class="h-input">
                            <label>H5 <span class="seq-neg">(-)</span>:</label>
                            <input type="number" id="amp-h5" value="0.0" step="0.1" min="0" max="10">
                            <input type="color" id="color-h5" value="#55FFFF">
                        </div>
                        <div class="h-input">
                            <label>H6 <span class="seq-zero">(0)</span>:</label>
                            <input type="number" id="amp-h6" value="0.0" step="0.1" min="0" max="10">
                            <input type="color" id="color-h6" value="#FFFF55">
                        </div>
                        <div class="h-input">
                            <label>H7 <span class="seq-pos">(+)</span>:</label>
                            <input type="number" id="amp-h7" value="0.0" step="0.1" min="0" max="10">
                            <input type="color" id="color-h7" value="#5555FF">
                        </div>
                        <div class="h-input">
                            <label>H8 <span class="seq-neg">(-)</span>:</label>
                            <input type="number" id="amp-h8" value="0.0" step="0.1" min="0" max="10">
                            <input type="color" id="color-h8" value="#FF00FF">
                        </div>
                        <div class="h-input">
                            <label>H9 <span class="seq-zero">(0)</span>:</label>
                            <input type="number" id="amp-h9" value="0.0" step="0.1" min="0" max="10">
                            <input type="color" id="color-h9" value="#FFFF55">
                        </div>
                        <div class="h-input">
                            <label>H10 <span class="seq-pos">(+)</span>:</label>
                            <input type="number" id="amp-h10" value="0.0" step="0.1" min="0" max="10">
                            <input type="color" id="color-h10" value="#00FF00">
                        </div>
                        <div class="h-input">
                            <label>H11 <span class="seq-neg">(-)</span>:</label>
                            <input type="number" id="amp-h11" value="0.0" step="0.1" min="0" max="10">
                            <input type="color" id="color-h11" value="#00FFFF">
                        </div>
                        <div class="h-input">
                            <label>H12 <span class="seq-zero">(0)</span>:</label>
                            <input type="number" id="amp-h12" value="0.0" step="0.1" min="0" max="10">
                            <input type="color" id="color-h12" value="#FFFF55">
                        </div>
                        <div class="h-input">
                            <label>H13 <span class="seq-pos">(+)</span>:</label>
                            <input type="number" id="amp-h13" value="0.0" step="0.1" min="0" max="10">
                            <input type="color" id="color-h13" value="#0000FF">
                        </div>
                    </div>
                </div>
                <div class="input-group">
                    <label for="amp-neg">Neg Seq (Fund):</label>
                    <div class="h-input">
                        <input type="number" id="amp-neg" value="0.1" step="0.1" min="0" max="10">
                        <input type="color" id="color-neg" value="#FF55FF">
                    </div>
                </div>
            </div>

            <div class="control-group">
                <h3>Transform Type</h3>
                <div class="radio-group">
                    <div>
                        <input type="radio" id="trans-amp" name="transform-type" value="amp" checked>
                        <label for="trans-amp">Amplitude Invariant (k=2/3)</label>
                    </div>
                    <div>
                        <input type="radio" id="trans-power" name="transform-type" value="power">
                        <label for="trans-power">Power Invariant (k=√2/3)</label>
                    </div>
                </div>
            </div>

            <div class="control-group">
                <h3>FFT Analysis</h3>
                <div class="input-group">
                    <label for="fft-signal-select">Select Signal:</label>
                    <select id="fft-signal-select">
                        <option value="Phase A">Phase A</option>
                        <option value="Phase B">Phase B</option>
                        <option value="Phase C">Phase C</option>
                        <option value="Alpha">Alpha</option>
                        <option value="Beta">Beta</option>
                        <option value="Complex Vector" selected>Complex Vector (α + jβ)</option>
                    </select>
                </div>
            </div>

            <div class="control-group">
                <h3>Visualization</h3>
                <div class="checkbox-group">
                    <div>
                        <input type="checkbox" id="decomp-check" checked>
                        <label for="decomp-check">Decomposition Mode</label>
                    </div>
                    <div>
                        <input type="checkbox" id="traj-check" checked>
                        <label for="traj-check">Show Trajectory</label>
                    </div>
                    <div>
                        <input type="checkbox" id="rot-fields-check">
                        <label for="rot-fields-check">Show Pos/Neg in Combined</label>
                    </div>
                    <div>
                        <input type="checkbox" id="extra-traj-check" disabled>
                        <label for="extra-traj-check">Trajectory for Extra Fields</label>
                    </div>
                    <div>
                        <input type="checkbox" id="rot-harm-check">
                        <label for="rot-harm-check">Rot. Each Harm</label>
                    </div>
                    <div class="button-row" style="margin-top: 5px;">
                        <button id="show-harm-btn" disabled>Show My Harmonics</button>
                    </div>
                </div>
            </div>

            <div class="sidebar-footer">
                <p>Power Systems Interactive Lab - 02</p>
                <a href="mailto:felipedicler@gmail.com">felipedicler@gmail.com</a>
            </div>
        </div>

        <div class="main-content">
            <div class="plot-grid" style="position: relative;">
                <svg id="overlay"
                    style="position: absolute; width: 100%; height: 100%; pointer-events: none; z-index: 100; top: 0; left: 0;"></svg>
                <div class="plot-container">
                    <h3> ABC Phasors</h3>
                    <canvas id="field-combined"></canvas>
                </div>
                <div class="plot-container">
                    <h3>ABC Signals</h3>
                    <canvas id="signal-combined"></canvas>
                </div>
                <div class="plot-container">
                    <h3>Clarke Transform - αβ Phasors</h3>
                    <canvas id="field-clarke"></canvas>
                </div>
                <div class="plot-container">
                    <h3>αβ Signals</h3>
                    <canvas id="signal-clarke"></canvas>
                </div>
                <div class="plot-container fft-container">
                    <h3>Single Side FFT Spectrum (Magnitude)</h3>
                    <canvas id="signal-fft"></canvas>
                </div>
            </div>
        </div>
    </div>
    <script src="script.js"></script>
</body>

</html>